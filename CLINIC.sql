###CLINIC DATABASE 
### CREATED BY RAHUL GHOSH
##UPDATED - May 4th, 2022


CREATE DATABASE CLINIC;
USE CLINIC;

CREATE TABLE DEPARTMENT (
		Department_ID			varchar(15) NOT NULL,
		Workers 			INT,
		Building_Location		VARCHAR(15),
	CONSTRAINT Department_PK PRIMARY KEY (Department_ID)
);


CREATE TABLE WORKER (
		Worker_ID 			INT NOT NULL,
		fname 				VARCHAR(10),
		lname 				VARCHAR(10),
		Gender 				CHAR(1),
		telephone 			VARCHAR(14),
		Salary 				INT,
	CONSTRAINT Worker_PK PRIMARY KEY (Worker_ID)
);

CREATE TABLE DOCTOR (
		Doctor_ID			INT NOT NULL, 
		Field				VARCHAR(20),
		Degree				VARCHAR(30),
		Department_ID			varchar(15) NOT NULL,
		D_Worker_ID			INT NOT NULL,
	CONSTRAINT Doctor_PK PRIMARY KEY (Doctor_ID),
	CONSTRAINT Doctor_FK1 FOREIGN KEY (Department_ID) REFERENCES DEPARTMENT(Department_ID),
	CONSTRAINT Doctor_FK2 FOREIGN KEY (D_Worker_ID) REFERENCES WORKER(Worker_ID)
	
);


CREATE TABLE STAFF (
		Staff_ID			INT NOT NULL, 
		Job_Title			VARCHAR(15),
		S_Worker_ID			INT,
		
	CONSTRAINT STAFF_PK PRIMARY KEY (Staff_ID),
	CONSTRAINT STAFF_FK1 FOREIGN KEY (S_Worker_ID) REFERENCES WORKER (Worker_ID)
	
);


CREATE TABLE CAFETERIA (
		Cafeteria_ID			varchar(10) NOT NULL, 
		Food_Type			VARCHAR(15),
		Seating				SMALLINT,
		
	CONSTRAINT CAFETERIA_PK PRIMARY KEY (Cafeteria_ID)
);

CREATE TABLE CAFETERIA_STAFF (
		Staff_ID 			INT NOT NULL,
		Cafeteria_ID			varchar(10) NOT NULL,
		Position			VARCHAR(15),
		
	CONSTRAINT CAFETERIA_STAFF_FK1 FOREIGN KEY (Staff_ID) REFERENCES STAFF (Staff_ID),
	CONSTRAINT CAFETERIA_STAFF_FK2 FOREIGN KEY (Cafeteria_ID) REFERENCES CAFETERIA (Cafeteria_ID)
);

CREATE TABLE BILL (
		Bill_ID				INT NOT NULL,
		Tests				VARCHAR(15),
		Treatment			VARCHAR(20),
		Time_Admitted			DATE,
		Prescription			VARCHAR(20),
		
	CONSTRAINT BILL_PK PRIMARY KEY (Bill_ID)
);


CREATE TABLE PATIENT (
		Patient_ID			INT NOT NULL,	
		fname				VARCHAR(10),
		lname 				VARCHAR(10),
		Address				TEXT,
		telephone			VARCHAR(14),
		Gender				VARCHAR(5),
		Age				INT,
		Blood_Type			VARCHAR(5),
		Cafeteria_ID			varchar(10) NOT NULL,
		Bill_ID				INT NOT NULL,
		
	CONSTRAINT PATIENT_PK PRIMARY KEY (Patient_ID),
	CONSTRAINT PATIENT_FK1 FOREIGN KEY (Cafeteria_ID) REFERENCES CAFETERIA(Cafeteria_ID),
	CONSTRAINT PATIENT_FK2 FOREIGN KEY (Bill_ID) REFERENCES BILL(Bill_ID)
);


CREATE TABLE MEDICATION (
		Medication_ID			varchar(15) NOT NULL,
		Doses				INT,
		Expiration_Date			DATE,
		
	CONSTRAINT MEDICATION_PK PRIMARY KEY (Medication_ID)
);



CREATE TABLE MEDICATION_PRESCRIBED (
		Prescription_ID			INT NOT NULL,
		Medication_ID			Varchar(15) NOT NULL,
		Patient_ID			INT NOT NULL,
		
	CONSTRAINT MEDICATION_PERSCRIBED_PK PRIMARY KEY (Prescription_ID),
	CONSTRAINT MEDICATION_PERSCRIBED_FK1 FOREIGN KEY (Medication_ID) REFERENCES MEDICATION (Medication_ID),
	CONSTRAINT MEDICATION_PERSCRIBED_FK2 FOREIGN KEY (Patient_ID) REFERENCES PATIENT (Patient_ID)
);


CREATE TABLE DIAGNOSIS (
		Illness				VARCHAR(20) NOT NUll,
		Doctor_ID			INT NOT NULL,
		Patient_ID			INT NOT NULL,
		
	CONSTRAINT DIAGNOSIS_PK PRIMARY KEY (Illness),
	CONSTRAINT DIAGNOSIS_FK1 FOREIGN KEY (Doctor_ID) REFERENCES DOCTOR(Doctor_ID),
	CONSTRAINT DIAGNOSIS_FK2 FOREIGN KEY (Patient_ID) REFERENCES PATIENT(Patient_ID)
);


CREATE TABLE TESTS (
		Test_ID				INT NOT NUll,
		Result				TINYINT(1),
		Illness				VARCHAR(20),
		Doctor_ID			INT NOT NULL,
		Patient_ID			INT NOT NULL,
		
	CONSTRAINT TESTS_PK PRIMARY KEY (Test_ID),
	CONSTRAINT TESTS_FK1 FOREIGN KEY (Doctor_ID) REFERENCES DOCTOR(Doctor_ID),
	CONSTRAINT TESTS_FK2 FOREIGN KEY (Illness) REFERENCES DIAGNOSIS(Illness),
	CONSTRAINT TESTS_FK3 FOREIGN KEY (Patient_ID) REFERENCES PATIENT(Patient_ID)
);


CREATE TABLE DOCTOR_PATIENT (
		Doctor_ID			INT NOT NULL,
		Patient_ID			INT NOT NULL,
		Time				DATE,
		
	CONSTRAINT DOCTOR_PATIENT_PK PRIMARY KEY (Doctor_ID),
	CONSTRAINT DOCTOR_PATIENT_FK1 FOREIGN KEY (Doctor_ID) REFERENCES DOCTOR(Doctor_ID),
	CONSTRAINT DOCTOR_PATIENT_FK2 FOREIGN KEY (Patient_ID) REFERENCES PATIENT(Patient_ID)
);

######INSERT STATEMENTS FOR DATA POPULATION 
INSERT INTO DEPARTMENT VALUES ('ICU', '20', 'Dobson');
INSERT INTO DEPARTMENT VALUES ('Pediatric', '26', 'Wheeler');
INSERT INTO DEPARTMENT VALUES ('ER', '32', 'Dobson');
INSERT INTO DEPARTMENT VALUES ('Burn Center', '15', 'Campbell');
INSERT INTO DEPARTMENT VALUES ('Pharmacy', '8', 'Wheeler');
INSERT INTO DEPARTMENT VALUES ('Burn Center 2', '16', 'Campbell');
INSERT INTO DEPARTMENT VALUES ('Pharmacy 2', '7', 'Wheeler');
INSERT INTO DEPARTMENT VALUES ('Pharmacy 3', '8', 'Wheeler');
INSERT INTO DEPARTMENT VALUES ('Pharmacy 4', '9', 'Wheeler');
INSERT INTO DEPARTMENT VALUES ('ICU 2', '22', 'Dobson');
INSERT INTO DEPARTMENT VALUES ('ICU 3', '22', 'Dobson 1');		
INSERT INTO DEPARTMENT VALUES ('Pediatric 2', '21', 'Wheeler 1');		
INSERT INTO DEPARTMENT VALUES ('ER 1', '30', 'Dobson 2');		
INSERT INTO DEPARTMENT VALUES ('Burn Center 3', '22', 'Campbell 2');	
INSERT INTO DEPARTMENT VALUES ('Pharmacy 1', '8', 'Wheeler 1');		
INSERT INTO DEPARTMENT VALUES ('Burn Center 4', '17', 'Campbell 4');		
INSERT INTO DEPARTMENT VALUES ('Pharmacy 9', '7', 'Wheeler 3');		
INSERT INTO DEPARTMENT VALUES ('ER 3', '7', 'Wheeler 9');
INSERT INTO DEPARTMENT VALUES ('RadioSignal', '7', 'Wheeler');	

INSERT INTO WORKER VALUES ('119275', 'Henry', 'Fuller', 'M', '(978)123-1234', '127000');
INSERT INTO WORKER VALUES ('122842', 'Zack', 'Futa', 'M', '(123)436-1236', '122000');
INSERT INTO WORKER VALUES ('197531', 'Cam', 'Ryder', 'M', '(543)753-1327', '72000');
INSERT INTO WORKER VALUES ('128575', 'Janet', 'Grosmen', 'F', '(617)355-7684', '150000');
INSERT INTO WORKER VALUES ('124865', 'Michelle', 'Haverhill', 'F', '(631)125-1235', '125000');
INSERT INTO WORKER VALUES ('118467', 'Oliver', 'Mansman', 'M', '(934)126-6421', '49000');
INSERT INTO WORKER VALUES ('195538', 'Lisa', 'Perez', 'F', '(682)165-8523', '64000');
INSERT INTO WORKER VALUES ('123456', 'Tilda', 'White', 'F', '(723)983-8521', '100000');
INSERT INTO WORKER VALUES ('124642', 'Patrick', 'McGuiyver', 'M', '(213)753-7234', '180000');
INSERT INTO WORKER VALUES ('105293', 'Wilson', 'Wilson', 'M', '(734)357-9853', '52000');
INSERT INTO WORKER VALUES ('195531', 'Lis', 'Per', 'F', '(682)165-8533', '65000');
INSERT INTO WORKER VALUES ('123452', 'Til', 'Whaton', 'F', '(723)983-8123', '190000');
INSERT INTO WORKER VALUES ('124643', 'Pat', 'McGur', 'F', '(213)753-7334', '190000');
INSERT INTO WORKER VALUES ('105295', 'Wil', 'Wesson', 'M', '(734)357-9833', '59000');
INSERT INTO WORKER VALUES ('122852', 'Zabner', 'Fon', 'M', '(123)436-1226', '122000');
INSERT INTO WORKER VALUES ('197521', 'Camel', 'Reddonr', 'F', '(503)753-1327', '72000');
INSERT INTO WORKER VALUES ('128515', 'Jennifer', 'Garner', 'F', '(617)355-7683', '150000');
INSERT INTO WORKER VALUES ('124835', 'Mitch', 'Haverhill', 'F', '(631)125-1238', '125000');
INSERT INTO WORKER VALUES ('118167', 'Olivia', 'Maan', 'F', '(932)126-6421', '90000');
INSERT INTO WORKER VALUES ('115538', 'Lindia', 'Pepelove', 'F', '(683)165-8523', '69000');
INSERT INTO WORKER VALUES ('123356', 'Tilna', 'Waked', 'F', '(723)983-8531', '100000');
INSERT INTO WORKER VALUES ('124602', 'Patricia', 'McGuiyver', 'F', '(213)753-7334', '190000');
INSERT INTO WORKER VALUES ('105213', 'Willy', 'Wonka', 'M', '(734)357-9153', '252000');
INSERT INTO WORKER VALUES ('195511', 'Liser', 'Perep', 'F', '(682)165-8513', '165000');


INSERT INTO DOCTOR VALUES ('12365', '  ', 'PHD', 'ICU', '124642');
INSERT INTO DOCTOR VALUES ('15235', '  ', 'MD', 'Pediatric', '128575');
INSERT INTO DOCTOR VALUES ('51235', '  ', 'PHD', 'ER', '123456');
INSERT INTO DOCTOR VALUES ('67891', '  ', 'MD', 'Pharmacy', '119275');
INSERT INTO DOCTOR VALUES ('14263', '  ', 'PHD', 'Burn Center', '124865');
INSERT INTO DOCTOR VALUES ('15642', '  ', 'PHD', 'ER', '122842');
INSERT INTO DOCTOR VALUES ('15555', '  ', 'PHD', 'Radiology', '122843');
INSERT INTO DOCTOR VALUES ('14264', '  ', 'PHD', 'Burn Center 2', '124866');
INSERT INTO DOCTOR VALUES ('15642', '  ', 'PHD', 'ER 2', '122844');
INSERT INTO DOCTOR VALUES ('15555', '  ', 'PHD', 'Radiology 2', '122844');
INSERT IGNORE INTO DOCTOR VALUES ('12361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('12261', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('19999', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('29000', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('39000', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('49000', '  ', 'PHD', 'ICU', '124641');
INSERT INTO  DOCTOR VALUES ('42361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('22361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('32361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('42361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('52361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('62361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('20361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('31361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('43361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('57361', '  ', 'PHD', 'ICU', '124641');
INSERT IGNORE INTO DOCTOR VALUES ('65361', '  ', 'PHD', 'ICU', '124641');

INSERT INTO STAFF VALUES ('0012', 'Cafeteria Staff', '197531');
INSERT INTO STAFF VALUES ('1632', 'Janitor', '118467');
INSERT INTO STAFF VALUES ('1834', 'Cafeteria Staff', '195538');
INSERT INTO STAFF VALUES ('1462', 'Janitor', '105293');
INSERT INTO STAFF VALUES ('1111', 'Cleaner', '105220');
INSERT INTO STAFF VALUES ('1222', 'Cleaner Special', '105229');
INSERT INTO STAFF VALUES ('1333', 'Roomba', '107229');
INSERT INTO STAFF VALUES ('1444', 'Egg Master', '107220');
INSERT INTO STAFF VALUES ('1999', 'Dish Washer', '118467');
INSERT INTO STAFF VALUES ('1998', 'Staff', '195538');
INSERT INTO STAFF VALUES ('1997', 'Janitor', '105293');
INSERT INTO STAFF VALUES ('2222', 'Cook', '105222');
INSERT INTO STAFF VALUES ('2111', 'Washer', '108220');
INSERT INTO STAFF VALUES ('1311', 'Dish Only', '105220');
INSERT INTO STAFF VALUES ('2232', 'Cook 2', '105222');
INSERT INTO STAFF VALUES ('2001', 'Washer Clothes', '101220');
INSERT INTO STAFF VALUES ('1321', 'Cook', '10220');
INSERT INTO STAFF VALUES ('1991', 'Dish Dish', '118461');
INSERT INTO STAFF VALUES ('2911', 'Staff 2', '195538');
INSERT INTO STAFF VALUES ('2912', 'Server', '105222');
INSERT INTO STAFF VALUES ('2223', 'Waiter', '105222');
INSERT INTO STAFF VALUES ('2180', 'Washer 2', '108210');
INSERT INTO STAFF VALUES ('1300', 'Dish Only', '101220');
INSERT INTO STAFF VALUES ('2009', 'Cook 2', '105222');
INSERT INTO STAFF VALUES ('2002', 'Washer Clothes', '101222');
INSERT INTO STAFF VALUES ('1327', 'Cook', '10229');

INSERT INTO CAFETERIA VALUES ('Wheeler', 'Mash Potatoes', '150');
INSERT INTO CAFETERIA VALUES ('Dobson', 'Lunchables', '200');
INSERT INTO CAFETERIA VALUES ('Campbell', 'Mash Potatoes', '90');
INSERT INTO CAFETERIA VALUES ('Ft Car', 'Beef Stroganoff', '100');
INSERT INTO CAFETERIA VALUES ('Dobson J', 'Tacos', '50');

INSERT INTO CAFETERIA_STAFF VALUES ('0012', 'Dobson', 'Cook');
INSERT INTO CAFETERIA_STAFF VALUES ('1834', 'Campbell', 'Server');
INSERT INTO CAFETERIA_STAFF VALUES ('1832', 'Campbell', 'Server Special');
INSERT INTO CAFETERIA_STAFF VALUES ('1839', 'Campbell', 'Burger Flipper');


INSERT INTO BILL VALUES ('1423', 'MRI', 'Lumbar puncture', '2019-02-11','Null');
INSERT INTO BILL VALUES ('1537', 'Blood test', 'Chemotherapy', '2019-02-09','Carboplatin');
INSERT INTO BILL VALUES ('1632', 'Blood test', 'Null', '2019-02-16','Insulin');
INSERT INTO BILL VALUES ('1744', 'EKG', 'Null', '2019-02-22 ', 'Thrombolytics');
INSERT INTO BILL VALUES ('1899', 'Radiology', 'Null', '2019-02-19 ', 'Insulin');

INSERT INTO PATIENT VALUES ('589215', 'Mike', 'Lock', '152 Main St', '(135)753-2346', 'M', '41', 'A+', 'Dobson', '1537');
INSERT INTO PATIENT VALUES ('975913', 'Harry', 'Sax', '53 Chendogg Ave', '(643)764-1256', 'M', '21', 'O-', 'Campbell', '1632');
INSERT INTO PATIENT VALUES ('193258', 'Jenny', 'Tayla', '651 Nowhre St', '(642)176-7421', 'F', '19', 'AB+', 'Dobson ', '1423');
INSERT INTO PATIENT VALUES ('497598', 'Benjamin', 'Dover', '63 Vancouver Way', '(432)753-1274', 'M', '72', 'B-', 'Wheeler', '1744');
INSERT INTO PATIENT VALUES ('491598', 'Freddie', 'Kruger', '99 Utah Way', '(432)753-1222', 'M', '89', 'B-', 'Wheeler', '1332');
INSERT INTO PATIENT VALUES ('589211', 'Menika', 'Lock', '152 South St', '(135)753-2346', 'M', '90', 'A+', 'Dobson', '1537');
INSERT INTO PATIENT VALUES ('974913', 'Holly', 'Eax', '53 Dumb Ave', '(633)764-1256', 'M', '29', 'O-', 'Campbell', '1632');
INSERT INTO PATIENT VALUES ('191158', 'Jen', 'Tala', '651 Nowhre St', '(642)176-7421', 'F', '19', 'AB+', 'Dobson ', '1423');
INSERT INTO PATIENT VALUES ('497898', 'Benjaminer', 'Doverer', '63 Vancouver Way', '(432)753-1274', 'M', '72', 'B-', 'Wheeler', '1744');
INSERT INTO PATIENT VALUES ('691598', 'Culmen', 'Kruger', '99 Utah Way', '(432)753-1222', 'M', '89', 'B-', 'Wheeler', '1332');

INSERT INTO MEDICATION VALUES ('Carboplatin', '40', '2019-05-30');
INSERT INTO MEDICATION VALUES ('Insulin', '10', '2020-02-02');
INSERT INTO MEDICATION VALUES ('Thrombolytics', '80', '2019-03-22');
INSERT INTO MEDICATION VALUES ('Lennarodhn', '100', '2022-01-21');
INSERT INTO MEDICATION VALUES ('Vesarol', '140', '2019-11-21');

INSERT INTO MEDICATION_PRESCRIBED VALUES ('416420', 'Carboplatin', '589215');
INSERT INTO MEDICATION_PRESCRIBED VALUES ('109214', 'Insulin', '975913');
INSERT INTO MEDICATION_PRESCRIBED VALUES ('201592', 'Thrombolytics', '497598');
INSERT INTO MEDICATION_PRESCRIBED VALUES ('201593', 'Vikadin', '497599');

INSERT INTO DIAGNOSIS VALUES ('Multiple Sclerosis', '12365', '193258');
INSERT INTO DIAGNOSIS VALUES ('Skin Cancer', '15642', '589215');
INSERT INTO DIAGNOSIS VALUES ('Diabetes', '15235', '975913');
INSERT INTO DIAGNOSIS VALUES ('Heart Attack', '51235', '497598');

INSERT INTO TESTS VALUES ('4512', '1', 'Multiple Sclerosis', '12365', '193258');
INSERT INTO TESTS VALUES ('5123', '1', 'Skin Cancer', '15642', '589215');
INSERT INTO TESTS VALUES ('7231', '1', 'Diabetes', '15235', '975913');
INSERT INTO TESTS VALUES ('1631', '1', 'Heart Attack', '51235', '497598');
INSERT INTO TESTS VALUES ('1633', '2', 'Blow Up ', '51234', '497591');


INSERT INTO DOCTOR_PATIENT VALUES ('12365', '193258', '2019-11-02');
INSERT INTO DOCTOR_PATIENT VALUES ('15642', '589215', '2019-09-02');
INSERT INTO DOCTOR_PATIENT VALUES ('15235', '975913', '2019-02-16');
INSERT INTO DOCTOR_PATIENT VALUES ('51235', '497598', '2019-02-22');
INSERT INTO DOCTOR_PATIENT VALUES ('51238', '497588', '2019-01-19');